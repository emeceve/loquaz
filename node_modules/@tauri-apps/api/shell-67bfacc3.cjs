"use strict";var t=require("./tslib.es6-2b0ec40b.cjs"),e=require("./tauri-b9628d6d.cjs"),n=require("./tauri-afdd7ff0.cjs");function r(r,i,o,s){return void 0===o&&(o=[]),t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return"object"==typeof o&&Object.freeze(o),[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"execute",program:i,args:o,options:s,onEventFn:n.transformCallback(r)}})]}))}))}var i=function(){function t(){this.eventListeners=Object.create(null)}return t.prototype.addEventListener=function(t,e){t in this.eventListeners?this.eventListeners[t].push(e):this.eventListeners[t]=[e]},t.prototype._emit=function(t,e){if(t in this.eventListeners)for(var n=0,r=this.eventListeners[t];n<r.length;n++){(0,r[n])(e)}},t.prototype.on=function(t,e){return this.addEventListener(t,e),this},t}(),o=function(){function n(t){this.pid=t}return n.prototype.write=function(n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:"string"==typeof n?n:Array.from(n)}})]}))}))},n.prototype.kill=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"killChild",pid:this.pid}})]}))}))},n}(),s=function(e){function n(t,n,r){void 0===n&&(n=[]);var o=e.call(this)||this;return o.stdout=new i,o.stderr=new i,o.program=t,o.args="string"==typeof n?[n]:n,o.options=null!=r?r:{},o}return t.__extends(n,e),n.sidecar=function(t,e,r){void 0===e&&(e=[]);var i=new n(t,e,r);return i.options.sidecar=!0,i},n.prototype.spawn=function(){return t.__awaiter(this,void 0,void 0,(function(){var e=this;return t.__generator(this,(function(t){return[2,r((function(t){switch(t.event){case"Error":e._emit("error",t.payload);break;case"Terminated":e._emit("close",t.payload);break;case"Stdout":e.stdout._emit("data",t.payload);break;case"Stderr":e.stderr._emit("data",t.payload)}}),this.program,this.args,this.options).then((function(t){return new o(t)}))]}))}))},n.prototype.execute=function(){return t.__awaiter(this,void 0,void 0,(function(){var e=this;return t.__generator(this,(function(t){return[2,new Promise((function(t,n){e.on("error",n);var r=[],i=[];e.stdout.on("data",(function(t){r.push(t)})),e.stderr.on("data",(function(t){i.push(t)})),e.on("close",(function(e){t({code:e.code,signal:e.signal,stdout:r.join("\n"),stderr:i.join("\n")})})),e.spawn().catch(n)}))]}))}))},n}(i);function a(n,r){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"open",path:n,with:r}})]}))}))}var u=Object.freeze({__proto__:null,Command:s,Child:o,EventEmitter:i,open:a});exports.Child=o,exports.Command=s,exports.EventEmitter=i,exports.open=a,exports.shell=u;
